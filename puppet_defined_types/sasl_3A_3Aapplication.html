<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>
  Defined Type: sasl::application
  
    &mdash; Documentation by YARD 0.9.8
  
</title>

  <link rel="stylesheet" href="../css/style.css" type="text/css" charset="utf-8" />

  <link rel="stylesheet" href="../css/common.css" type="text/css" charset="utf-8" />

<script type="text/javascript" charset="utf-8">
  pathId = "puppet_defined_types::sasl::application";
  relpath = '../';
</script>


  <script type="text/javascript" charset="utf-8" src="../js/jquery.js"></script>

  <script type="text/javascript" charset="utf-8" src="../js/app.js"></script>


  </head>
  <body>
    <div class="nav_wrap">
      <iframe id="nav" src="../puppet_defined_type_list.html?1"></iframe>
      <div id="resizer"></div>
    </div>

    <div id="main" tabindex="-1">
      <div id="header">
        <div id="menu">
  
    <a href="../_index.html">Index (s)</a> &raquo;
    <span class='title'><span class='object_link'>Defined Types</span></span>
     &raquo; 
    <span class="title">sasl::application</span>
  
</div>

        <div id="search">
  
    <a class="full_list_link" id="puppet_class_list_link"
        href="../puppet_class_list.html">

        <svg width="24" height="24">
          <rect x="0" y="4" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="12" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="20" width="24" height="4" rx="1" ry="1"></rect>
        </svg>
    </a>
  
</div>
        <div class="clear"></div>
      </div>

      <div id="content"><h1>Defined Type: sasl::application</h1>
<div class="box_info">
  <dl>
    <dt>Defined in:</dt>
    <dd>
      manifests/application.pp
    </dd>
  </dl>
</div>
<h2>Overview</h2>
<div class="docstring">
  <div class="discussion">
    
<p>Installs per-application SASL authentication configuration.</p>

  </div>
</div>
<div class="tags">
  
  <div class="examples">
    <p class="tag_title">Examples:</p>
    
      
        <p class="example_title"><div class='inline'>
<p>Configure Postfix for <code>DIGEST-MD5</code> and <code>CRAM-MD5</code>
authentication using the sasldb backend</p>
</div></p>
      
      <pre class="example code"><code>include ::sasl
::sasl::application { &#39;smtpd&#39;:
  pwcheck_method =&gt; &#39;auxprop&#39;,
  auxprop_plugin =&gt; &#39;sasldb&#39;,
  mech_list      =&gt; [&#39;digest-md5&#39;, &#39;cram-md5&#39;],
}</code></pre>
    
      
        <p class="example_title"><div class='inline'>
<p>Configure Postfix for <code>PLAIN</code> and <code>LOGIN</code>
authentication using the saslauthd backend which itself is using
LDAP+STARTTLS</p>
</div></p>
      
      <pre class="example code"><code>include ::sasl
class { &#39;::sasl::authd&#39;:
  mechanism           =&gt; &#39;ldap&#39;,
  ldap_auth_method    =&gt; &#39;bind&#39;,
  ldap_search_base    =&gt; &#39;ou=people,dc=example,dc=com&#39;,
  ldap_servers        =&gt; [&#39;ldap://ldap.example.com&#39;],
  ldap_start_tls      =&gt; true,
  ldap_tls_cacert_dir =&gt; &#39;/etc/pki/tls/certs&#39;,
  ldap_tls_ciphers    =&gt; &#39;AES256&#39;,
}
::sasl::application { &#39;smtpd&#39;:
  pwcheck_method =&gt; &#39;saslauthd&#39;,
  mech_list      =&gt; [&#39;plain&#39;, &#39;login&#39;],
}</code></pre>
    
  </div>
<p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>pwcheck_method</span>
      
      
        <span class='type'>(<tt>Enum['auxprop', 'saslauthd']</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>The password check method.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>mech_list</span>
      
      
        <span class='type'>(<tt>Array[SASL::Mech, 1]</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>The authentication mechanisms to offer/support.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>application</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>$title</tt>)</em>
      
      
        &mdash;
        <div class='inline'>
<p>The name of the application.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>auxprop_plugin</span>
      
      
        <span class='type'>(<tt>Optional[SASL::Auxprop]</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>undef</tt>)</em>
      
      
        &mdash;
        <div class='inline'>
<p>If the <code>pwcheck_method</code> is <code>auxprop</code> then the name of
the plugin to use.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>ldapdb_uri</span>
      
      
        <span class='type'>(<tt>Optional[Array[Bodgitlib::LDAP::URI::Simple, 1]]</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>undef</tt>)</em>
      
      
        &mdash;
        <div class='inline'>
<p>List of LDAP URI&#39;s to query.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>ldapdb_id</span>
      
      
        <span class='type'>(<tt>Optional[String]</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>undef</tt>)</em>
      
      
        &mdash;
        <div class='inline'>
<p>SASL ID to use to authenticate with LDAP.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>ldapdb_mech</span>
      
      
        <span class='type'>(<tt>Optional[String]</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>undef</tt>)</em>
      
      
        &mdash;
        <div class='inline'>
<p>SASL mechanism to use with LDAP.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>ldapdb_pw</span>
      
      
        <span class='type'>(<tt>Optional[String]</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>undef</tt>)</em>
      
      
        &mdash;
        <div class='inline'>
<p>Password to use with LDAP.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>ldapdb_rc</span>
      
      
        <span class='type'>(<tt>Optional[Stdlib::Absolutepath]</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>undef</tt>)</em>
      
      
        &mdash;
        <div class='inline'>
<p>Path to separate LDAP configuration file.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>ldapdb_starttls</span>
      
      
        <span class='type'>(<tt>Optional[Enum['try', 'demand']]</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>undef</tt>)</em>
      
      
        &mdash;
        <div class='inline'>
<p>Whether to attempt STARTTLS or not.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>sasldb_path</span>
      
      
        <span class='type'>(<tt>Optional[Stdlib::Absolutepath]</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>undef</tt>)</em>
      
      
        &mdash;
        <div class='inline'>
<p>Path to local SASL database.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>sql_engine</span>
      
      
        <span class='type'>(<tt>Optional[Enum['mysql', 'pgsql', 'sqlite']]</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>undef</tt>)</em>
      
      
        &mdash;
        <div class='inline'>
<p>Which SQL engine to use.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>sql_hostnames</span>
      
      
        <span class='type'>(<tt>Optional[Array[SASL::HostPort, 1]]</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>undef</tt>)</em>
      
      
        &mdash;
        <div class='inline'>
<p>List of database servers to use.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>sql_user</span>
      
      
        <span class='type'>(<tt>Optional[String]</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>undef</tt>)</em>
      
      
        &mdash;
        <div class='inline'>
<p>Database user to use.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>sql_passwd</span>
      
      
        <span class='type'>(<tt>Optional[String]</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>undef</tt>)</em>
      
      
        &mdash;
        <div class='inline'>
<p>Password of database user.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>sql_database</span>
      
      
        <span class='type'>(<tt>Optional[String]</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>undef</tt>)</em>
      
      
        &mdash;
        <div class='inline'>
<p>Name of the database.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>sql_select</span>
      
      
        <span class='type'>(<tt>Optional[String]</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>undef</tt>)</em>
      
      
        &mdash;
        <div class='inline'>
<p>SQL query used with <code>SELECT</code> operations.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>sql_insert</span>
      
      
        <span class='type'>(<tt>Optional[String]</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>undef</tt>)</em>
      
      
        &mdash;
        <div class='inline'>
<p>SQL statement used with <code>INSERT</code> operations.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>sql_update</span>
      
      
        <span class='type'>(<tt>Optional[String]</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>undef</tt>)</em>
      
      
        &mdash;
        <div class='inline'>
<p>SQL statement used with <code>UPDATE</code> operations.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>sql_usessl</span>
      
      
        <span class='type'>(<tt>Optional[Boolean]</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>undef</tt>)</em>
      
      
        &mdash;
        <div class='inline'>
<p>Whether to use SSL or not.</p>
</div>
      
    </li>
  
</ul>


  <p class="tag_title">See Also:</p>
  <ul class="see">
    
      <li><span class='object_link'><a href="../puppet_classes/sasl.html" title="puppet_classes::sasl (puppet_class)">::sasl</a></span></li>
    
      <li><span class='object_link'><a href="../puppet_classes/sasl_3A_3Aauthd.html" title="puppet_classes::sasl::authd (puppet_class)">::sasl::authd</a></span></li>
    
  </ul>

</div><div class="method_details_list">
  <table class="source_code">
    <tr>
      <td>
        <pre class="lines">


51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116</pre>
      </td>
      <td>
        <pre class="code"><span class="info file"># File 'manifests/application.pp', line 51</span>

define sasl::application (
  Enum[&#39;auxprop&#39;, &#39;saslauthd&#39;]                     $pwcheck_method,
  Array[SASL::Mech, 1]                             $mech_list,
  String                                           $application     = $title,
  Optional[SASL::Auxprop]                          $auxprop_plugin  = undef,
  # ldapdb
  Optional[Array[Bodgitlib::LDAP::URI::Simple, 1]] $ldapdb_uri      = undef,
  Optional[String]                                 $ldapdb_id       = undef,
  Optional[String]                                 $ldapdb_mech     = undef,
  Optional[String]                                 $ldapdb_pw       = undef,
  Optional[Stdlib::Absolutepath]                   $ldapdb_rc       = undef,
  Optional[Enum[&#39;try&#39;, &#39;demand&#39;]]                  $ldapdb_starttls = undef,
  # sasldb
  Optional[Stdlib::Absolutepath]                   $sasldb_path     = undef,
  # sql
  Optional[Enum[&#39;mysql&#39;, &#39;pgsql&#39;, &#39;sqlite&#39;]]       $sql_engine      = undef,
  Optional[Array[SASL::HostPort, 1]]               $sql_hostnames   = undef,
  Optional[String]                                 $sql_user        = undef,
  Optional[String]                                 $sql_passwd      = undef,
  Optional[String]                                 $sql_database    = undef,
  Optional[String]                                 $sql_select      = undef,
  Optional[String]                                 $sql_insert      = undef,
  Optional[String]                                 $sql_update      = undef,
  Optional[Boolean]                                $sql_usessl      = undef,
) {

  if ! defined(Class[&#39;::sasl&#39;]) {
    fail(&#39;You must include the sasl base class before using any sasl defined resources&#39;)
  }

  $service_file = &quot;${::sasl::application_directory}/${application}.conf&quot;

  file { $service_file:
    ensure  =&gt; file,
    owner   =&gt; 0,
    group   =&gt; 0,
    mode    =&gt; &#39;0644&#39;,
    content =&gt; template(&quot;${module_name}/application.conf.erb&quot;),
  }

  case $pwcheck_method {
    &#39;auxprop&#39;: {
      $auxprop_package = $::sasl::auxprop_packages[$auxprop_plugin]
      ensure_packages([$auxprop_package])
      Package[$auxprop_package] -&gt; File[$service_file]
    }
    &#39;saslauthd&#39;: {
      # Require saslauthd if that&#39;s the method
      if ! defined(Class[&#39;::sasl::authd&#39;]) {
        fail(&#39;You must include the sasl::authd class before using any sasl defined resources&#39;)
      }
      Class[&#39;::sasl::authd&#39;] -&gt; File[$service_file]
    }
    default: {
      # noop
    }
  }

  # Build up an array of packages that need to be installed based on the
  # chosen authentication mechanisms
  $packages = unique(values($::sasl::mech_packages.filter |Tuple $package| {
    member($mech_list, $package[0])
  }))
  ensure_packages($packages)
  Package[$packages] -&gt; File[$service_file]
}</pre>
      </td>
    </tr>
  </table>
</div>
</div>

      <div id="footer">
  Generated on Thu Feb  2 21:45:10 2017 by
  <a href="http://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
  0.9.8 (ruby-2.2.5).
</div>

    </div>
  </body>
</html>